!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o=a("bpxeT"),i=a("2TvXO"),s=a("jGMOa"),c=a("dauUa"),l=a("jxsHo"),u=a("hmUQ5"),d=a("6JpON");function f(){return(f=e(o)(e(i).mark((function t(n){var r,a,o;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(r=n.target[0].value)){t.next=16;break}return u.spiner.start(),c.API.setSearchQuery(r),t.next=7,c.API.fetchKeyword();case 7:if((a=t.sent).length){t.next=12;break}return e(d).Notify.warning("💔 Sorry but we can`t find films for this word"),u.spiner.stop(),t.abrupt("return");case 12:(0,l.renderFilms)(a,s.filmBoxRef),o=(0,l.pagination)(c.API.getPage(),c.API.getMax()),(0,l.renderPagination)(o,s.filmBoxRef),u.spiner.stop();case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e(o)(e(i).mark((function t(){var n,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.spiner.start(),e.next=3,c.API.fetchPopularMovies();case 3:n=e.sent,(0,l.renderFilms)(n,s.filmBoxRef),r=(0,l.pagination)(c.API.getPage(),c.API.getMax()),(0,l.renderPagination)(r,s.filmBoxRef),u.spiner.stop();case 8:case"end":return e.stop()}}),t)})))(),s.formRef.addEventListener("submit",(function(e){return f.apply(this,arguments)}));o=a("bpxeT"),i=a("2TvXO");var p=a("dyT35"),v=(c=a("dauUa"),s=a("jGMOa"),a("aNvF6"));d=a("6JpON");function m(e){return b.apply(this,arguments)}function b(){return(b=e(o)(e(i).mark((function t(n){var r,a,o,l,u;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.target.classList.contains("js-films-list")){t.next=2;break}return t.abrupt("return");case 2:return s.filmBoxRef.removeEventListener("click",m),t.prev=3,r=Number(n.target.closest(".movie_card").attributes.getNamedItem("js-id").value),t.next=7,c.API.fetchById(r);case 7:if(a=t.sent){t.next=10;break}throw new Error("❌ Something go wrong, so we can`t load your film");case 10:(o=_(g(a))).show(),document.body.style.overflow="hidden",y(o),h(r,a),(l=document.querySelector(".trailer-btn")).hidden=!0,(u=a.videos.results).length>0&&(u.every((function(e){return!e.type.includes("Trailer")}))?l.hidden=!0:l.hidden=!1),l.addEventListener("click",(function(){var e=x(k(u.find((function(e){if("Trailer"===e.type)return e}))));e.show(),y(e)})),t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),e(d).Notify.failure(t.t0.message),console.log(t.t0.message);case 26:case"end":return t.stop()}}),t,null,[[3,22]])})))).apply(this,arguments)}function h(t,n){var r=document.querySelector(".movie__to-watched"),a=document.querySelector(".movie__to-queue");v.storage.checkWatched(t)&&r.setAttribute("js-disabled",""),v.storage.checkQueue(t)&&a.setAttribute("js-disabled",""),r.addEventListener("click",(function(t){t.preventDefault(),t.target.hasAttribute("js-disabled")?e(d).Notify.warning("🎬 Your film has already sucessfully been added"):(v.storage.addFilmToWatch(n),r.setAttribute("js-disabled",""))})),a.addEventListener("click",(function(t){t.preventDefault(),t.target.hasAttribute("js-disabled")?e(d).Notify.warning("🎬 Your film has already sucessfully been added"):(v.storage.addFilmToQueue(n),a.setAttribute("js-disabled",""))}))}function _(e){return p.create(e,{onShow:w,onClose:function(){document.body.style.overflow="",s.filmBoxRef.addEventListener("click",m)}})}function g(e){var t=e.poster_path,n=e.original_title,r=e.vote_average,a=e.vote_count,o=e.popularity,i=e.genres,s=e.overview;return'\n  <div class="modal">\n    <button class="button__modal" type="button">\n    </button>\n    <div class="movie__description-card">\n      <div class="div__movie-img" >\n        <img\n          class="movie__img"\n          src="https://image.tmdb.org/t/p/w500'.concat(t,'"\n          alt="info of movie"\n        />\n      </div>\n      <div class="movie__desc">\n        <p class="movie__title">').concat(n,'</p>\n        <table class="movie__characters">\n          <tbody class="character__table">\n            <tr>\n              <td class="character">Vote / Votes</td>\n              <td class="character__item "><span class="vote">').concat(r.toFixed(1),'</span><span class="vote__slash">/</span><span class="vote__grey">').concat(a,'</span></td>\n            </tr>\n            <tr>\n              <td class="character">Popularity</td>\n              <td class="character__item">').concat(o.toFixed(1),'</td>\n            </tr>\n            <tr>\n              <td class="character">Original Title</td>\n              <td class="character__item">').concat(n,'</td>\n            </tr>\n            <tr>\n              <td class="character">Genre</td>\n              <td class="character__item">').concat(0===i.length?"Another genre":i[0].name,'</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class="movie__about">About</p>\n        <p class="movie__about-description">\n        ').concat(s,'\n        </p>\n        <ul class="button__list">\n          <li class="button__item">\n            <button class="movie__to-watched" type="button">\n              add to Watched\n            </button>\n          </li>\n          <li class="button__item">\n            <button class="movie__to-queue" type="button">add to queue</button>\n          </li>\n        </ul>\n        <button class="trailer-btn" type="button">watch trailer</button>\n      </div>\n    </div>\n  </div>')}function y(e){var t=e.element().querySelector("button"),n=function(r){r.preventDefault(),e.close(),t.removeEventListener("click",n)};t.addEventListener("click",n)}function w(e){var t=function(n){if("Escape"!==n.code)return!1;e.close(),document.removeEventListener("keydown",t)};document.addEventListener("keydown",t)}function x(e){return p.create(e,{onShow:w})}function k(e){var t=e.key;return'<iframe\n  width="1141"\n  height="641"\n  src="https://www.youtube.com/embed/'.concat(t,'"\n  frameborder="0"\n  allowfullscreen\n></iframe>\n  <button type="button" class="button__trailer--close"></button>')}s.filmBoxRef.addEventListener("click",m)}();
//# sourceMappingURL=index.13ee4ec5.js.map
