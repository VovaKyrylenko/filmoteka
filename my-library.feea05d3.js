function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},t.parcelRequired7c6=o);var r=o("9B8F0"),a=o("9dB6Q"),s=o("iCfuO"),c=o("gSWVZ"),l=o("KTnyM"),d=(l=o("KTnyM"),o("lm9xO")),u=o("7Y9D8");async function g(t){var n;if(!t.target.classList.contains("js-films-list"))try{const i=Number(t.target.closest(".movie_card").attributes.getNamedItem("js-id").value),o=await a.API.fetchById(i);if(!o)throw new Error("‚ùå Something go wrong, so we can`t load your film");const d=(n=function({poster_path:e,original_title:t,vote_average:n,vote_count:i,popularity:o,genres:r,overview:a}){return`\n  <div class="modal">\n    <button class="button__modal" type="button">\n    </button>\n    <div class="movie__description-card">\n      <div class="div__movie-img" >\n        <img\n          class="movie__img"\n          src="https://image.tmdb.org/t/p/w500${e}"\n          alt="info of movie"\n        />\n      </div>\n      <div class="movie__desc">\n        <p class="movie__title">${t}</p>\n        <table class="movie__characters">\n          <tbody class="character__table">\n            <tr>\n              <td class="character">Vote / Votes</td>\n              <td class="character__item "><span class="vote">${n.toFixed(1)}</span><span class="vote__slash">/</span><span class="vote__grey">${i}</span></td>\n            </tr>\n            <tr>\n              <td class="character">Popularity</td>\n              <td class="character__item">${o.toFixed(1)}</td>\n            </tr>\n            <tr>\n              <td class="character">Original Title</td>\n              <td class="character__item">${t}</td>\n            </tr>\n            <tr>\n              <td class="character">Genre</td>\n              <td class="character__item">${r[0].name}</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class="movie__about">About</p>\n        <p class="movie__about-description">\n        ${a}\n        </p>\n        <ul class="button__list">\n          <li class="button__item">\n            <button class="movie__to-watched" type="button">\n              Delete from Watched\n            </button>\n          </li>\n          <li class="button__item">\n            <button class="movie__to-queue" type="button">Delete from Queue</button>\n          </li>\n        </ul>\n        <button class="trailer-btn" type="button">watch trailer</button>\n      </div>\n    </div>\n  </div>`}(o),r.create(n,{onShow:m}));d.show(),f(d),function(t,n){const i=document.querySelector(".movie__to-watched"),o=document.querySelector(".movie__to-queue"),r=o=>{if(o.preventDefault(),o.target.hasAttribute("js-disabled"))return void e(u).Notify.warning("üé¨ Your film is not in the Watched");c.storage.delFilmFromWatch(t),i.setAttribute("js-disabled","");const r=c.storage.getTwentyFromWatch();(0,l.renderFilms)(r,s.filmBoxRef);const a=(0,l.pagination)(c.storage.getPageWatch(),c.storage.getMaxWatch());if((0,l.renderPagination)(a,s.filmBoxRef,l.listClickHandlerWatch),n.close(),0===r.length){document.querySelector(".pagination").innerHTML="",s.filmBoxRef.innerHTML=""}},a=i=>{if(i.preventDefault(),i.target.hasAttribute("js-disabled"))return void e(u).Notify.warning("üé¨ Your film is not in the Queue");c.storage.delFilmFromQueue(t),o.setAttribute("js-disabled","");const r=c.storage.getTwentyFromQueue();(0,l.renderFilms)(r,s.filmBoxRef);const a=(0,l.pagination)(c.storage.getPageQueue(),c.storage.getMaxQueue());if((0,l.renderPagination)(a,s.filmBoxRef,l.listClickHandlerQueue),n.close(),0===r.length){document.querySelector(".pagination").innerHTML=""}};c.storage.checkWatched(t)||i.setAttribute("js-disabled","");c.storage.checkQueue(t)||o.setAttribute("js-disabled","");i.addEventListener("click",r),o.addEventListener("click",a)}(i,d);const g=document.querySelector(".trailer-btn");g.hidden=!0;const p=o.videos.results;p.length>0&&(p.every((e=>!e.type.includes("Trailer")))?g.hidden=!0:g.hidden=!1),g.addEventListener("click",(()=>{const e=function(e){return r.create(e,{onShow:m})}(function({key:e}){return`<iframe\n  width="1141"\n  height="641"\n  src="https://www.youtube.com/embed/${e}"\n  frameborder="0"\n  allowfullscreen\n></iframe>\n  <button type="button" class="button__trailer--close"></button>`}(p.find((e=>{if("Trailer"===e.type)return e}))));e.show(),f(e)}))}catch(t){e(u).Notify.failure(t.message),console.log(t.message)}}function f(e){const t=e.element().querySelector("button"),n=i=>{i.preventDefault(),e.close(),t.removeEventListener("click",n)};t.addEventListener("click",n)}function m(e){const t=n=>{if("Escape"!==n.code)return!1;e.close(),document.removeEventListener("keydown",t)};document.addEventListener("keydown",t)}s.listButton.addEventListener("click",(function(e){if(e.target.classList.contains("js-watched")){d.spiner.start();const e=c.storage.getTwentyFromWatch();(0,l.renderFilms)(e,s.filmBoxRef);const t=(0,l.pagination)(c.storage.getPage(),c.storage.getMax());(0,l.renderPagination)(t,s.filmBoxRef),d.spiner.stop()}if(e.target.classList.contains("js-queue")){const e=c.storage.getTwentyFromWatch();if(0===e.length){return document.querySelector(".pagination").innerHTML="",s.filmBoxRef.innerHTML="",void d.spiner.stop()}(0,l.renderFilms)(e,s.filmBoxRef);const t=(0,l.pagination)(c.storage.getPageWatch(),c.storage.getMaxWatch());(0,l.renderPagination)(t,s.filmBoxRef,l.listClickHandlerWatch),d.spiner.stop(),s.filmBoxRef.addEventListener("click",g)}else{if(!e.target.classList.contains("js-queue"))return;{d.spiner.start();const e=c.storage.getTwentyFromQueue();if(0===e.length){d.spiner.stop();return document.querySelector(".pagination").innerHTML="",void(s.filmBoxRef.innerHTML="")}(0,l.renderFilms)(e,s.filmBoxRef);const t=(0,l.pagination)(c.storage.getPageQueue(),c.storage.getMaxQueue());(0,l.renderPagination)(t,s.filmBoxRef,l.listClickHandlerQueue),d.spiner.stop(),s.filmBoxRef.addEventListener("click",g)}}}));
//# sourceMappingURL=my-library.feea05d3.js.map
