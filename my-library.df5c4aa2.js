!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var i=a("bpxeT"),o=a("2TvXO"),s=a("dyT35"),c=a("dauUa"),l=a("jGMOa"),u=a("aNvF6"),d=a("jxsHo"),f=(d=a("jxsHo"),a("hmUQ5")),m=a("6JpON");function g(e,t){return v.apply(this,arguments)}function v(){return(v=e(i)(e(o).mark((function t(n,r){var a,i,s,l,u;return e(o).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.target.classList.contains("js-films-list")){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,a=Number(n.target.closest(".movie_card").attributes.getNamedItem("js-id").value),t.next=6,c.API.fetchById(a);case 6:if(i=t.sent){t.next=9;break}throw new Error("❌ Something go wrong, so we can`t load your film");case 9:(s=p(h(i,r))).show(),b(s),x(a,s,r),(l=document.querySelector(".trailer-btn")).hidden=!0,(u=i.videos.results).length>0&&(u.every((function(e){return!e.type.includes("Trailer")}))?l.hidden=!0:l.hidden=!1),l.addEventListener("click",(function(){var e=y(w(u.find((function(e){if("Trailer"===e.type)return e}))));e.show(),b(e)})),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(2),e(m).Notify.failure(t.t0.message),console.log(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[2,20]])})))).apply(this,arguments)}function p(e){return s.create(e,{onShow:_})}function h(e,t){var n=e.poster_path,r=e.original_title,a=e.vote_average,i=e.vote_count,o=e.popularity,s=e.genres,c=e.overview;return'\n  <div class="modal">\n    <button class="button__modal" type="button">\n    </button>\n    <div class="movie__description-card">\n      <div class="div__movie-img" >\n        <img\n          class="movie__img"\n          src="https://image.tmdb.org/t/p/w500'.concat(n,'"\n          alt="info of movie"\n        />\n      </div>\n      <div class="movie__desc">\n        <p class="movie__title">').concat(r,'</p>\n        <table class="movie__characters">\n          <tbody class="character__table">\n            <tr>\n              <td class="character">Vote / Votes</td>\n              <td class="character__item "><span class="vote">').concat(a.toFixed(1),'</span><span class="vote__slash">/</span><span class="vote__grey">').concat(i,'</span></td>\n            </tr>\n            <tr>\n              <td class="character">Popularity</td>\n              <td class="character__item">').concat(o.toFixed(1),'</td>\n            </tr>\n            <tr>\n              <td class="character">Original Title</td>\n              <td class="character__item">').concat(r,'</td>\n            </tr>\n            <tr>\n              <td class="character">Genre</td>\n              <td class="character__item">').concat(s[0].name,'</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class="movie__about">About</p>\n        <p class="movie__about-description">\n        ').concat(c,'\n        </p>\n        <ul class="button__list">\n          <li class="button__item">\n                ').concat("watch"==t?'<button class="movie__to-watched" type="button">Delete from Watched</button>':'<button class="movie__to-queue" type="button">Delete from Queue</button>','\n          </li>\n        </ul>\n        <button class="trailer-btn" type="button">watch trailer</button>\n      </div>\n    </div>\n  </div>')}function b(e){var t=e.element().querySelector("button"),n=function(r){r.preventDefault(),e.close(),t.removeEventListener("click",n)};t.addEventListener("click",n)}function _(e){var t=function(n){if("Escape"!==n.code)return!1;e.close(),document.removeEventListener("keydown",t)};document.addEventListener("keydown",t)}function y(e){return s.create(e,{onShow:_})}function w(e){var t=e.key;return'<iframe\n  width="1141"\n  height="641"\n  src="https://www.youtube.com/embed/'.concat(t,'"\n  frameborder="0"\n  allowfullscreen\n></iframe>\n  <button type="button" class="button__trailer--close"></button>')}function x(t,n,r){var a=document.querySelector(".movie__to-watched"),i=document.querySelector(".movie__to-queue");u.storage.checkWatched(t)||a.setAttribute("js-disabled",""),u.storage.checkQueue(t)||i.setAttribute("js-disabled",""),"watch"==r?a.addEventListener("click",(function(r){if(r.preventDefault(),r.target.hasAttribute("js-disabled"))e(m).Notify.warning("🎬 Your film is not in the Watched");else{u.storage.delFilmFromWatch(t),a.setAttribute("js-disabled","");var i=u.storage.getTwentyFromWatch();(0,d.renderFilms)(i,l.filmBoxRef);var o=(0,d.pagination)(u.storage.getPageWatch(),u.storage.getMaxWatch());if((0,d.renderPagination)(o,l.filmBoxRef,d.listClickHandlerWatch),n.close(),0===i.length)document.querySelector(".pagination").innerHTML="",l.filmBoxRef.innerHTML=""}})):"queue"==r&&i.addEventListener("click",(function(r){if(r.preventDefault(),r.target.hasAttribute("js-disabled"))e(m).Notify.warning("🎬 Your film is not in the Queue");else{u.storage.delFilmFromQueue(t),i.setAttribute("js-disabled","");var a=u.storage.getTwentyFromQueue();(0,d.renderFilms)(a,l.filmBoxRef);var o=(0,d.pagination)(u.storage.getPageQueue(),u.storage.getMaxQueue());if((0,d.renderPagination)(o,l.filmBoxRef,d.listClickHandlerQueue),n.close(),0===a.length)document.querySelector(".pagination").innerHTML=""}}))}l.listButton.addEventListener("click",(function(e){if(e.target.classList.contains("js-watched")){f.spiner.start();var t=u.storage.getTwentyFromWatch();if(0===t.length)return document.querySelector(".pagination").innerHTML="",l.filmBoxRef.innerHTML="",void f.spiner.stop();(0,d.renderFilms)(t,l.filmBoxRef);var n=(0,d.pagination)(u.storage.getPageWatch(),u.storage.getMaxWatch());(0,d.renderPagination)(n,l.filmBoxRef,d.listClickHandlerWatch),l.filmBoxRef.addEventListener("click",(function(e){g(e,"watch")})),f.spiner.stop()}else{if(!e.target.classList.contains("js-queue"))return;f.spiner.start();var r=u.storage.getTwentyFromWatch();if(0===r.length)return document.querySelector(".pagination").innerHTML="",l.filmBoxRef.innerHTML="",void f.spiner.stop();(0,d.renderFilms)(r,l.filmBoxRef);var a=(0,d.pagination)(u.storage.getPageQueue(),u.storage.getMaxQueue());(0,d.renderPagination)(a,l.filmBoxRef,d.listClickHandlerQueue),l.filmBoxRef.addEventListener("click",(function(e){g(e,"watch")})),f.spiner.stop()}}))}();
//# sourceMappingURL=my-library.df5c4aa2.js.map
