function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequired7c6=i);var s=i("9B8F0"),r=i("9dB6Q"),a=i("iCfuO"),c=i("gSWVZ"),l=i("KTnyM"),u=i("lm9xO"),d=i("7Y9D8");a.listButton.addEventListener("click",(function(t){const n=()=>{document.querySelector(".js-watched").classList.toggle("buttons__style--focus"),document.querySelector(".js-queue").classList.toggle("buttons__style--focus"),a.filmBoxRef.removeEventListener("click",m),a.filmBoxRef.removeEventListener("click",f)};if(t.target.classList.contains("js-watched")){u.spiner.start(),n();const t=c.storage.getTwentyFromWatch();if(0===t.length)return a.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-watch.jpg" style="width: 100%; object-fit: cover;"></div>',e(d).Notify.warning("🙈 You haven't watched films"),void u.spiner.stop();{(0,l.renderFilms)(t,a.filmBoxRef);const e=(0,l.pagination)(c.storage.getPageWatch(),c.storage.getMaxWatch());a.filmBoxRef.setAttribute("data-id","watch-gallery"),(0,l.renderPagination)(e,a.filmBoxRef),a.filmBoxRef.addEventListener("click",m),u.spiner.stop()}}else{if(!t.target.classList.contains("js-queue"))return;{u.spiner.start(),n();const t=c.storage.getTwentyFromQueue();if(0===t.length)return a.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-queue.jpg" style="width: 100%; object-fit: cover;"></div>',e(d).Notify.warning("🗃 You haven't queued films"),void u.spiner.stop();{(0,l.renderFilms)(t,a.filmBoxRef);const e=(0,l.pagination)(c.storage.getPageQueue(),c.storage.getMaxQueue());a.filmBoxRef.setAttribute("data-id","queue-gallery"),(0,l.renderPagination)(e,a.filmBoxRef),a.filmBoxRef.addEventListener("click",f),u.spiner.stop()}}}}));function m(e){g(e,"watch")}function f(e){g(e,"queue")}async function g(t,n){if(!t.target.classList.contains("js-films-list")){a.filmBoxRef.removeEventListener("click",m),a.filmBoxRef.removeEventListener("click",f);try{const o=Number(t.target.closest(".movie_card").attributes.getNamedItem("js-id").value),i=await r.API.fetchById(o);if(!i)throw new Error("❌ Something go wrong, so we can`t load your film");const u=function(e,t){return s.create(e,{onShow:v,onClose:e=>{"watch"==t?a.filmBoxRef.addEventListener("click",m):a.filmBoxRef.addEventListener("click",f)}})}(function({poster_path:e,original_title:t,vote_average:n,vote_count:o,popularity:i,genres:s,overview:r},a){let c="",l="";"queue"==a?(c='<button class="movie__to-queue" type="button">Delete from Queue</button>',l='<button class="movie__watched" type="button">add to Watched</button>'):"watch"==a&&(c='<button class="movie__to-watched" type="button">Delete from Watched</button>',l='<button class="movie__queue" type="button">add to queue</button>');return`\n  <div class="modal">\n    <button class="button__modal" type="button">\n    </button>\n    <div class="movie__description-card">\n      <div class="div__movie-img" >\n        <img\n          class="movie__img"\n          src="https://image.tmdb.org/t/p/w500${e}"\n          alt="info of movie"\n        />\n      </div>\n      <div class="movie__desc">\n        <p class="movie__title">${t}</p>\n        <table class="movie__characters">\n          <tbody class="character__table">\n            <tr>\n              <td class="character">Vote / Votes</td>\n              <td class="character__item "><span class="vote">${n.toFixed(1)}</span><span class="vote__slash">/</span><span class="vote__grey">${o}</span></td>\n            </tr>\n            <tr>\n              <td class="character">Popularity</td>\n              <td class="character__item">${i.toFixed(1)}</td>\n            </tr>\n            <tr>\n              <td class="character">Original Title</td>\n              <td class="character__item">${t}</td>\n            </tr>\n            <tr>\n              <td class="character">Genre</td>\n              <td class="character__item">${s[0].name}</td>\n            </tr>\n          </tbody>\n        </table>\n        <p class="movie__about">About</p>\n        <p class="movie__about-description">\n        ${r}\n        </p>\n        <ul class="button__list">\n          <li class="button__item">${c}</li>\n          <li class="button__item">${l}</li>\n        </ul>\n        <button class="trailer-btn trailer-btn--mtzero" type="button">watch trailer</button>\n      </div>\n    </div>\n  </div>`}(i,n),n);u.show(),h(u),function(t,n,o){const i=document.querySelector(".movie__to-watched"),s=document.querySelector(".movie__to-queue"),r=o=>{o.preventDefault(),c.storage.delFilmFromWatch(t);const i=c.storage.getTwentyFromWatch();(0,l.renderFilms)(i,a.filmBoxRef);const s=(0,l.pagination)(c.storage.getPageWatch(),c.storage.getMaxWatch());if((0,l.renderPagination)(s,a.filmBoxRef),n.close(),0===i.length){document.querySelector(".pagination").innerHTML="",a.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-watch.jpg" style="width: 100%; object-fit: cover;"></div>',e(d).Notify.warning("🙈 You haven't watched films")}},u=o=>{o.preventDefault(),c.storage.delFilmFromQueue(t);const i=c.storage.getTwentyFromQueue();(0,l.renderFilms)(i,a.filmBoxRef);const s=(0,l.pagination)(c.storage.getPageQueue(),c.storage.getMaxQueue());if((0,l.renderPagination)(s,a.filmBoxRef),n.close(),0===i.length){document.querySelector(".pagination").innerHTML="",a.filmBoxRef.innerHTML='<div style="width: 100%;"><img src="https://myron5.github.io/goit-js-hw-07/img-queue.jpg" style="width: 100%; object-fit: cover;"></div>',e(d).Notify.warning("🗃 You haven't queued films")}};"watch"==o?i.addEventListener("click",r):"queue"==o&&s.addEventListener("click",u)}(o,u,n),function(t,n,o){const i=document.querySelector(".movie__watched"),s=document.querySelector(".movie__queue"),r=t=>{t.preventDefault(),t.target.hasAttribute("js-disabled")?e(d).Notify.warning("🎬 Your film has already sucessfully been added"):(c.storage.addFilmToWatch(n),i.textContent="Moved to Watched",i.setAttribute("js-disabled",""))},a=t=>{t.preventDefault(),t.target.hasAttribute("js-disabled")?e(d).Notify.warning("🎬 Your film has already sucessfully been added"):(c.storage.addFilmToQueue(n),s.textContent="Moved to Queue",s.setAttribute("js-disabled",""))};"watch"==o?(c.storage.checkQueue(t)&&(s.textContent="Moved to Queue",s.setAttribute("js-disabled","")),s.addEventListener("click",a)):"queue"==o&&(c.storage.checkWatched(t)&&(i.textContent="Moved to Watched",i.setAttribute("js-disabled","")),i.addEventListener("click",r))}(o,i,n);const g=document.querySelector(".trailer-btn");g.hidden=!0;const b=i.videos.results;b.length>0&&(b.every((e=>!e.type.includes("Trailer")))?g.hidden=!0:g.hidden=!1),g.addEventListener("click",(()=>{const e=b.find((e=>{if("Trailer"===e.type)return e})),t=(n=function({key:e}){return`<iframe\n  width="1141"\n  height="641"\n  src="https://www.youtube.com/embed/${e}"\n  frameborder="0"\n  allowfullscreen\n></iframe>\n  <button type="button" class="button__trailer--close"></button>`}(e),s.create(n,{onShow:v}));var n;t.show(),h(t)}))}catch(t){e(d).Notify.failure(t.message),console.log(t.message)}}}function h(e){const t=e.element().querySelector("button"),n=o=>{o.preventDefault(),e.close(),t.removeEventListener("click",n)};t.addEventListener("click",n)}function v(e){const t=n=>{if("Escape"!==n.code)return!1;e.close(),document.removeEventListener("keydown",t)};document.addEventListener("keydown",t)}document.querySelector(".js-queue").click();
//# sourceMappingURL=my-library.967d9397.js.map
